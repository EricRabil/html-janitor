!function(e,i){"function"==typeof define&&define.amd?define("html-janitor",i):"object"==typeof exports?module.exports=i():e.HTMLJanitor=i()}(this,function(){function e(e){var i=e.tags,t=Object.keys(i),n=t.map(function(e){return typeof i[e]}).every(function(e){return"object"===e||"boolean"===e});if(!n)throw new Error("The configuration was invalid");this.config=e}function i(e){return-1!==o.indexOf(e.nodeName)}function t(e){return-1!==r.indexOf(e.nodeName)}function n(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}var o=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],r=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return e.prototype.clean=function(e){var i=document.createElement("div");return i.innerHTML=e,this._sanitize(i),i.innerHTML},e.prototype._sanitize=function(e){var o=n(e),r=o.firstChild();if(r)do{var a=r.nodeName.toLowerCase(),d=this.config.tags[a];if(!r._sanitized)if(r.nodeType!==Node.TEXT_NODE){if(r.nodeType===Node.COMMENT_NODE){e.removeChild(r),this._sanitize(e);break}var s,l=t(r);l&&(s=Array.prototype.some.call(r.childNodes,i));var f=l&&s,c=!!e.parentNode,u=i(e)&&i(r)&&c;if(void 0===this.config.tags[a]||f||!this.config.keepNestedBlockElements&&u){if("SCRIPT"!==r.nodeName&&"STYLE"!==r.nodeName)for(;r.childNodes.length>0;)e.insertBefore(r.childNodes[0],r);e.removeChild(r),this._sanitize(e);break}for(var m=0;m<r.attributes.length;m+=1){var h=r.attributes[m],N=h.name.toLowerCase(),v=d[N]||d===!0,E=!v,T=v!==!0&&h.value!==v;(E||T)&&(r.removeAttribute(h.name),m-=1)}this._sanitize(r),r._sanitized=!0}else if(""===r.data.trim()&&(r.previousElementSibling&&i(r.previousElementSibling)||r.nextElementSibling&&i(r.nextElementSibling))){e.removeChild(r),this._sanitize(e);break}}while(r=o.nextSibling())},e});
//# sourceMappingURL=html-janitor.min.js.map