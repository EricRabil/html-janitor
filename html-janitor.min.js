!function(e,n){"function"==typeof define&&define.amd?define("html-janitor",n):"object"==typeof exports?module.exports=n():e.HTMLJanitor=n()}(this,function(){function e(e){var n=e.tags,t=Object.keys(n),i=t.map(function(e){return typeof n[e]}).every(function(e){return"object"===e||"boolean"===e||"function"===e});if(!i)throw new Error("The configuration was invalid");this.config=e}function n(e){return-1!==a.indexOf(e.nodeName)}function t(e){return-1!==f.indexOf(e.nodeName)}function i(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function o(e,n){return"undefined"==typeof n?!0:"function"==typeof n?!n(e):!1}function r(e,n,t){var i=e.name.toLowerCase();return n===!0?!1:"function"==typeof n[i]?!n[i](e.value,t):"undefined"==typeof n[i]?!0:n[i]===!1?!0:"string"==typeof n[i]?n[i]!==e.value:!1}var a=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],f=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return e.prototype.clean=function(e){var n=document.createElement("div");return n.innerHTML=e,this._sanitize(n),n.innerHTML},e.prototype._sanitize=function(e){var a=i(e),f=a.firstChild();if(f)do if(!f._sanitized)if(f.nodeType!==Node.TEXT_NODE){if(f.nodeType===Node.COMMENT_NODE){e.removeChild(f),this._sanitize(e);break}var d,s=t(f);s&&(d=Array.prototype.some.call(f.childNodes,n));var u=!!e.parentNode,l=n(e)&&n(f)&&u,c=f.nodeName.toLowerCase(),m=this.config.tags[c],p=s&&d;if(p||o(f,m)||!this.config.keepNestedBlockElements&&l){if("SCRIPT"!==f.nodeName&&"STYLE"!==f.nodeName)for(;f.childNodes.length>0;)e.insertBefore(f.childNodes[0],f);e.removeChild(f),this._sanitize(e);break}for(var h=0;h<f.attributes.length;h+=1){var N=f.attributes[h];r(N,m,f)&&(f.removeAttribute(N.name),h-=1)}this._sanitize(f),f._sanitized=!0}else if(""===f.data.trim()&&(f.previousElementSibling&&n(f.previousElementSibling)||f.nextElementSibling&&n(f.nextElementSibling))){e.removeChild(f),this._sanitize(e);break}while(f=a.nextSibling())},e});
//# sourceMappingURL=html-janitor.min.js.map